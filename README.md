# 日次 緊張構造チャート

モバイルで毎日5〜10分の入力→保存→習慣化。緊張構造チャートで目標達成を可視化するPWAアプリケーション。

![PWA Badge](https://img.shields.io/badge/PWA-enabled-blue)
![Mobile First](https://img.shields.io/badge/Mobile-First-green)
![Offline Support](https://img.shields.io/badge/Offline-Support-orange)

## ✨ 特徴

- 📱 **モバイルファースト設計** - 片手操作に最適化
- ⚡ **PWA対応** - ホーム画面に追加してアプリのように使用可能
- 🌐 **オフライン動作** - インターネット接続なしでも利用可能
- 🎨 **モダンなデザイン** - グラデーション＋フロステッドグラス効果
- ⏱️ **タイマー機能** - 5/7/10分のタイマーで作業時間を管理
- 🔥 **Streak追跡** - 連続日数を記録してモチベーション維持
- 💾 **ローカルストレージ** - データはデバイスに安全に保存
- 📤 **バックアップ機能** - JSON形式でエクスポート/インポート
- 🌙 **ダークモード** - システム設定に自動対応

## 🚀 クイックスタート

### 1. アイコンの生成

PWAとして使用するには、アイコンファイルが必要です：

```bash
# ブラウザで generate-icons.html を開く
open generate-icons.html
# または
python3 -m http.server 8000
# http://localhost:8000/generate-icons.html にアクセス
```

1. 絵文字（デフォルト: 📊）を選択
2. 「アイコン生成」ボタンをクリック
3. 192x192 と 512x512 のアイコンをダウンロード
4. `icon-192.png` と `icon-512.png` をプロジェクトルートに配置

### 2. ローカルサーバーの起動

PWA機能（Service Workerなど）を使用するにはHTTPSまたはlocalhostが必要です：

```bash
# Python 3がインストールされている場合
python3 -m http.server 8000

# Node.jsの場合
npx serve .

# または他のローカルサーバー
```

### 3. アプリケーションにアクセス

ブラウザで http://localhost:8000 を開く

### 4. PWAとしてインストール（オプション）

#### Android Chrome:
1. ブラウザメニュー → 「ホーム画面に追加」
2. または画面上部のインストールバナーをクリック

#### iOS Safari:
1. 共有ボタン（□に↑）をタップ
2. 「ホーム画面に追加」を選択

## 📖 使い方

### 基本フロー

1. **タイマー選択**: 5/7/10分から選択して開始
2. **入力**:
   - 🎯 成果目標: 何を達成したいか
   - 📊 現実: 今の状況
   - ✅ アクション: 具体的な行動（複数追加可能）
   - 📝 ステータス: 進捗状況
   - 📸 証拠・ログ: 実行した証拠
   - 💭 リフレクション: 振り返り（任意）
3. **保存**: 下部の「保存して完了」ボタン（Cmd/Ctrl+S でも可）
4. **習慣化**: Streakを伸ばしてバッジを獲得

### タイマーについて

- タイマーは目安として機能します
- 時間を超過しても入力は続けられます
- ゼロになると通知が表示されます
- マイナス時間も表示されます（例: -02:30）

### 履歴機能

- 📚 **検索**: 全文検索で過去のエントリを検索
- 🔍 **フィルタ**: 「完了アクションあり」で絞り込み
- 📅 **並べ替え**: 新しい順/古い順
- ✏️ **編集**: 過去のエントリを編集可能
- 📋 **複製**: 過去のエントリを今日に複製

### リマインダー設定

#### A. Web通知テスト
ページを開いている時に通知を表示（要権限）

#### B. カレンダー登録（推奨）
1. 設定タブ → 「カレンダーに追加（ICS）」
2. 時刻を設定（デフォルト: 20:00）
3. ICSファイルをダウンロード
4. カレンダーアプリで開いて登録
5. 毎日指定時刻にリマインダーが届く

## 🛠️ 技術スタック

- **フロントエンド**: Vanilla JavaScript + Tailwind CSS (CDN)
- **PWA**: Service Worker + Web App Manifest
- **ストレージ**: localStorage
- **タイムゾーン**: Asia/Tokyo（Intl.DateTimeFormat）
- **通知**: Web Notifications API
- **オフライン**: Cache API (Stale-While-Revalidate戦略)

## 📁 ファイル構成

```
.
├── index.html              # メインアプリケーション
├── manifest.webmanifest    # PWAマニフェスト
├── sw.js                   # Service Worker
├── generate-icons.html     # アイコン生成ツール
├── icon-192.png           # アプリアイコン 192x192（要生成）
├── icon-512.png           # アプリアイコン 512x512（要生成）
└── README.md              # このファイル
```

## 🎨 カスタマイズ

### カラーテーマ変更

`index.html` の `<style>` セクションでカラーを変更できます：

```css
/* プライマリカラー */
primary: {
  DEFAULT: '#6366F1',  /* Indigo */
  dark: '#4F46E5',
  light: '#818CF8'
}

/* アクセントカラー */
accent: {
  DEFAULT: '#EC4899',  /* Pink */
  dark: '#DB2777',
  light: '#F472B6'
}
```

### タイマーのデフォルト時間

`index.html` の JavaScript セクション：

```javascript
let timerDuration = 5 * 60; // デフォルト5分（秒単位）
```

## 🔧 開発者ツール

設定タブの「開発者ツール」を展開すると以下の機能が使えます：

- **日付 ±1日**: Streak計算のテスト用
- **日付リセット**: 本日に戻す
- **全データ削除**: localStorage を初期化

## 📊 データ構造

エントリは以下の形式で localStorage に保存されます：

```json
{
  "id": "unique-id",
  "date": "2025-01-15",
  "goal": {
    "title": "目標タイトル",
    "detail": "詳細説明"
  },
  "reality": "現状の記述",
  "actions": [
    {
      "id": "action-id",
      "text": "アクション内容",
      "status": "todo|doing|done"
    }
  ],
  "statusNote": "ステータスメモ",
  "evidence": "証拠・ログ",
  "reflection": "振り返り",
  "createdAt": "2025-01-15T12:00:00.000Z",
  "updatedAt": "2025-01-15T12:30:00.000Z"
}
```

## 🔒 プライバシー

- すべてのデータはローカルデバイスに保存
- サーバーへのデータ送信なし
- インターネット接続不要（PWAインストール後）
- バックアップは手動でJSONエクスポート

## 🚧 今後の改善案

1. **バックエンド連携** - Firebase/Supabaseで複数デバイス間の同期
2. **Push通知** - サーバー経由の定時プッシュ通知
3. **ドラッグ並べ替え** - アクションの優先順位調整
4. **統計・可視化** - 週次/月次の達成率グラフ
5. **Capacitor移行** - ネイティブアプリ化

## 📝 ライセンス

このプロジェクトはオープンソースです。自由に使用・改変できます。

## 🤝 貢献

バグ報告や機能提案は Issue でお願いします。

---

**作成日**: 2025年1月
**バージョン**: 1.0.0
**対応ブラウザ**: Chrome, Safari, Edge（最新版）
